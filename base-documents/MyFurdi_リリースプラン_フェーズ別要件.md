# MyFurdi アプリ リリースプラン - フェーズ別要件

**作成日**: 2025年10月9日
**バージョン**: 1.0.0
**目的**: 議事録から整理した修正要望とリリースプランの体系化

---

## 📋 目次

1. [概要](#概要)
2. [フェーズ1：最優先機能（3月上旬ストア公開）](#フェーズ1最優先機能3月上旬ストア公開)
3. [フェーズ2以降：拡張機能](#フェーズ2以降拡張機能)
4. [デザイン更新項目](#デザイン更新項目)
5. [運用プラン](#運用プラン)

---

## 概要

### リリース戦略

- **Phase1**: 必須機能のみでストア公開（3月上旬目標）
- **Phase2以降**: 拡張機能を段階的にリリース
- **審査リスク低減**: サーバー側で管理可能な設計（アプリ更新不要）

### 分割リリースの目的

1. 早期リリースによるユーザーフィードバック取得
2. ストア審査リスクの最小化
3. 段階的な機能拡充による品質確保
4. 運用負荷の分散

---

## フェーズ1：最優先機能（3月上旬ストア公開）

### 1. リリース体制

#### ストア公開準備
- **目標日**: 2025年3月上旬
- **対象ストア**:
  - App Store（iOS）
  - Google Play（Android）
- **公開範囲**: 一般会員がインストール可能

#### 品質管理
- ベータテスト実施（社内 → 限定ユーザー → 一般公開）
- クラッシュレポート収集体制
- バグトラッキングシステム導入

---

### 2. 既存構成の踏襲と画面方針

#### Webビュー表示コンテンツ
- **基本方針**: 既存のWebビューコンテンツは基本踏襲
- **対象コンテンツ**:
  - FAQページ
  - 利用規約
  - プライバシーポリシー
  - お知らせ詳細ページ

#### ネイティブ画面化の対象
自社システムと連動する箇所は可能な限りネイティブ画面化：
- ✅ ポイント表示
- ✅ バッジ収集画面
- ✅ 入館証（QRコード）
- ✅ ダッシュボード（ホーム画面）
- ✅ レポート画面（運動記録、体組成データ）

---

### 3. ポイント機能（裏稼働）

#### 基本設計
- **実装範囲**: Phase1からポイント基盤を実装
- **サーバー側機能**:
  - ポイントの保持
  - ポイントの加算・減算
  - ポイント履歴管理
- **アプリ側表示**: Phase1では非表示（将来の表出に即応可能）

#### 付与方式（2案を選択可能）

**案1: 逐次付与／累積方式**
- リアルタイムでポイントを付与
- ユーザーがすぐに確認可能
- システム負荷: 中

**案2: 後日バッチ一括計算方式**
- 日次・週次でバッチ処理
- ルールが固まるまでの暫定運用に適している
- システム負荷: 低

#### データモデル
```json
{
  "userId": "string",
  "points": {
    "total": "number",
    "available": "number",
    "pending": "number"
  },
  "history": [
    {
      "date": "datetime",
      "action": "string",
      "points": "number",
      "description": "string"
    }
  ]
}
```

---

### 4. バッジ（実装＆収集表示の基礎）

#### バッジ収集基盤
- **実装内容**:
  - バッジの定義・管理機能
  - バッジ獲得条件の判定ロジック
  - バッジ収集画面の表示

#### デザイン拡張性
- **バッジ画像**: 先方提供想定
- **スキーマ設計**: 将来の追加に対応可能
- **サーバー側管理**: アプリ再審査不要化

#### バッジ定義スキーマ
```json
{
  "badgeId": "string",
  "name": "string",
  "description": "string",
  "imageUrl": "string",
  "category": "string",
  "conditions": {
    "type": "string",
    "value": "number"
  },
  "rarity": "common|rare|epic|legendary"
}
```

#### サーバー側でのバッジ管理
- 定義ファイルの差し替え
- 画像の差し替え
- 獲得条件の変更
- **メリット**: アプリ更新・再審査不要

---

### 5. 連携（新Pix／Q.Pix/旧システム等）

#### 運動データ同期の2方式対応

**方式A: 新Pixサーバ → アプリへプロキシ配信**
- 新Pixサーバーが中継役
- データの一元管理
- セキュリティ管理が容易

**方式B: アプリ → 各サービスAPI直接取得**
- アプリから各サービスに直接接続
- リアルタイム性が高い
- サービスごとの認証が必要

#### 切り替え可能設計
- 要件確定まで両方式に対応可能な設計
- 設定ファイルで切り替え可能

#### 店舗ごとの導入状況対応
- **Q.Pix（旧）**: 店舗ごとに導入状況が異なる
- **権限管理**: 同期可否を権限で出し分け
- **フォールバック**: 連携できない場合の代替表示

---

### 6. ログイン／認証・権限制御

#### 基本認証
- **プライマリ**: 新Pixの会員DBと連携したアカウント
- **紐づけ方式**: メールアドレスまたは会員ID

#### 代替ログイン（非対応マシンユーザー向け）
- メール + パスワード
- Google SSO（オプション）
- Apple Sign In（オプション、iOS必須）

#### 連携サービスごとの個別ログイン
- **タニタ連携**: 必要時のみ個別ログイン
- **DNA検査サービス**: 必要時のみ個別ログイン
- **基本機能**: 未ログインでも利用可能

#### 紛失・機種変対策
- **サーバー側アカウント基盤**: 履歴を保持
- **データ引き継ぎ**: アカウント復元機能
- **バックアップ**: 定期的なサーバー同期

#### セキュリティ
- **LINE連携**: トークン/OTPでユーザー識別
- **外部API**: セキュアなトークン管理
- **セッション管理**: 短命トークン + リフレッシュトークン

---

### 7. 管理・分析（必須計測）

#### 管理ダッシュボード（Web管理側に新設）

**基本指標**
- アプリDL数（累計・期間別）
- AU/DAU/WAU（アクティブユーザー）
- 継続率（D1/D7/D30）

**機能別利用状況**
- 画面別アクセス数
- 機能別利用率
- タップヒートマップ

**セグメント別分析**
- 店舗別
- 会員種別別
- デバイスOS別
- 年齢層別

**データ収集方法**
- Firebase Analytics（推奨）
- Google Analytics 4
- カスタムイベント送信

---

### 8. UI/デザイン体制

#### デザインフロー
1. **ワイヤー提示**: 当方で作成
2. **色味・アイコン**: Furdi Webのトーンを踏襲
3. **デザインレビュー**: 先方と合意形成

#### デザインガイドライン
- **カラーパレット**: 既存Webと統一
- **タイポグラフィ**: iOS/Android標準を踏襲
- **アイコン**: 統一感のあるアイコンセット

#### バッジ等の世界観
- **サイズ基準**: 推奨サイズ指定
- **余白ルール**: パディング/マージン統一
- **配色ルール**: ブランドカラーとの調和

---

### 9. 審査リスク低減

#### 金銭価値の扱い
- **Phase1**: 「金銭価値に直結しないポイント／スコア扱い」で実装
- **外部ポイント変換**: 露出しない
- **景品性**: 表示しない

#### 期間イベント・ミッション
- **データ差し替え**: サーバー側で管理
- **画像差し替え**: サーバー側で管理
- **メリット**: アプリ更新無しで運用可能

#### ストア審査ガイドライン遵守
- **App Store**: [App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)
- **Google Play**: [Google Play のデベロッパー プログラム ポリシー](https://play.google.com/about/developer-content-policy/)

---

### 10. 壁紙などの個人化データ

#### サーバー保管
- **壁紙**: サーバー側で保管
- **テーマ設定**: サーバー側で保管
- **カスタマイズ設定**: サーバー側で保管

#### 機種変対応
- アカウント復元時に自動復元
- クラウド同期機能

#### Phase1での実装範囲
- 基盤のみ用意
- UIは簡易版でも可
- Phase2で本格実装

---

## フェーズ2以降：拡張機能

### 1. GameFi系拡充

#### ログインボーナス
- **日次ボーナス**: 連続ログイン日数に応じて報酬
- **週次ボーナス**: 週間アクティブユーザーへの報酬
- **月次ボーナス**: 月間アクティブユーザーへの報酬

#### ミッション機能
- **デイリーミッション**: 毎日リセット
- **ウィークリーミッション**: 毎週リセット
- **マンスリーミッション**: 毎月リセット
- **シーズンミッション**: 期間限定イベント

#### サプライズ報酬
- **誕生月ボーナス**: ユーザーの誕生月に特典
- **ランダム報酬**: 来館時にランダムで付与
- **アチーブメント報酬**: 特定条件達成時

#### ガチャ機能

**法令遵守**
- 景表法遵守（景品表示法）
- 賭博該当回避
- プラットフォーム審査基準遵守

**実装要件**
- 提供割合表記（確率表示）
- 上限価値の設定
- 結果ログの開示
- アプリ内ポイントのみで閉じる（Phase2初期）

---

### 2. ランク／リーダーボード／コミュニティ

#### ランクシステム
- **ランク**: シルバー／ゴールド／プラチナ等
- **スキーマ**: ポイント・達成条件と連動
- **特典**: ランクごとの特典設定

#### リーダーボード
- **日次ランキング**: 日次バッチ集計
- **週次ランキング**: 週次バッチ集計
- **月次ランキング**: 月次バッチ集計
- **負荷最小化**: バッチ処理で対応

#### コミュニティ機能
- フレンド機能
- グループチャレンジ
- ソーシャルシェア

---

### 3. スマートウォッチ連携

#### Apple Health連携
- **データ取得**: Apple Healthからデータ取得
- **同期頻度**: リアルタイム or 定期同期
- **対象データ**: 歩数、心拍数、消費カロリー等

#### Apple Watch / Androidウォッチ
- **簡易コンパニオンApp**:
  - 入館QR表示
  - 進捗表示
  - 通知表示

---

### 4. 遺伝子結果に基づくQA機能

#### LINE先行提供
- 当面はLINEで先行提供
- 同一バックエンド（PHP/AWS）を使用

#### アプリ移行
- アプリのフロントから同一バックエンドを叩く構成
- シームレスな移行

#### 個人情報保護
- **認可**: 短命トークン使用
- **アクセス制限**: 本人のみアクセス可能
- **監査ログ**: すべてのアクセスを記録

---

### 5. 外部サービス連携のUX平準化

#### 連携ID不一致問題の軽減
- **キー項目の一致チェック**: 電話番号等
- **ガイドUI**: わかりやすい連携手順
- **エラーハンドリング**: 不一致時の対応フロー

#### トークン管理
- 1度ログインした連携は長期利用可能
- セキュアなトークン管理
- 自動更新機能

---

### 6. 運用・配信

#### 期間イベント管理
- **サーバ定義**: イベント定義をサーバー側で管理
- **UI差し替え**: 画像・テキストの差し替え
- **審査不要**: アプリ更新不要

#### 通知機能
- **お知らせ配信**: アプリ内通知
- **PUSH通知**: 来店促進、イベント告知
- **セグメント配信**: ターゲットユーザーへの配信

---

## デザイン更新項目

### フェーズ1：デザイン関連

#### 1. 既存画面の調整
- [ ] ホーム画面のネイティブ化
- [ ] レポート画面のネイティブ化
- [ ] 入館証画面のネイティブ化
- [ ] リワード画面のネイティブ化（基礎）

#### 2. バッジ収集画面
- [ ] バッジ一覧表示UI
- [ ] バッジ詳細表示UI
- [ ] バッジ獲得アニメーション
- [ ] バッジカテゴリ分類UI

#### 3. 壁紙・個人化
- [ ] 壁紙選択UI（簡易版）
- [ ] テーマ切り替えUI（簡易版）

#### 4. デザインガイドライン
- [ ] バッジデザインガイド作成
- [ ] カラーパレット確定
- [ ] タイポグラフィ確定
- [ ] アイコンセット作成

---

### フェーズ2：デザイン関連

#### 1. GameFi系UI
- [ ] ログインボーナス画面
- [ ] ミッション一覧画面
- [ ] ガチャ画面
- [ ] サプライズ報酬演出

#### 2. ランク・リーダーボード
- [ ] ランク表示UI
- [ ] リーダーボード画面
- [ ] ランクアップ演出

#### 3. DNA検査QA機能
- [ ] QAチャット画面
- [ ] DNA結果詳細表示
- [ ] レポート表示UI

#### 4. コミュニティ
- [ ] フレンドリスト画面
- [ ] グループチャレンジ画面
- [ ] ソーシャルシェアUI

---

## 運用プラン

### フェーズ1：運用関連

#### 1. リリース体制
- [ ] ストア公開プロセス確立
- [ ] ベータテスト環境構築
- [ ] バグトラッキングシステム導入
- [ ] クラッシュレポート収集設定

#### 2. ポイント基盤
- [ ] ポイント管理サーバー構築
- [ ] 付与方式の選定・実装
- [ ] ポイント履歴管理機能
- [ ] バッチ処理設計（案2の場合）

#### 3. 連携基盤
- [ ] 新Pix連携API実装
- [ ] Q.Pix連携API実装
- [ ] 店舗ごとの権限設定
- [ ] フォールバック処理実装

#### 4. 認証・権限
- [ ] 新Pix会員DB連携
- [ ] 代替ログイン実装
- [ ] SSO実装（Google/Apple）
- [ ] トークン管理システム
- [ ] 機種変・データ引き継ぎ機能

#### 5. 管理・分析
- [ ] 管理ダッシュボード構築
- [ ] Firebase Analytics設定
- [ ] カスタムイベント定義
- [ ] セグメント分析設定

#### 6. サーバー側管理基盤
- [ ] バッジ定義管理機能
- [ ] イベント定義管理機能
- [ ] コンテンツ差し替え機能
- [ ] 通知配信機能

---

### フェーズ2：運用関連

#### 1. GameFi運用
- [ ] ミッション定義・管理機能
- [ ] ガチャ確率設定・管理
- [ ] イベント運営フロー確立
- [ ] 報酬バランス調整

#### 2. ランク・リーダーボード
- [ ] ランク判定バッチ処理
- [ ] リーダーボード集計処理
- [ ] ランク特典管理

#### 3. スマートウォッチ連携
- [ ] Apple Health連携実装
- [ ] ウォッチアプリ開発
- [ ] データ同期処理

#### 4. DNA検査QA
- [ ] バックエンドAPI統合
- [ ] セキュリティ対策強化
- [ ] 監査ログ機能

#### 5. 外部連携UX改善
- [ ] 連携フロー最適化
- [ ] エラーハンドリング改善
- [ ] トークン自動更新機能

#### 6. 配信・通知
- [ ] セグメント配信機能
- [ ] PUSH通知最適化
- [ ] イベント告知自動化

---

## まとめ

### フェーズ1の成功基準
- ✅ 3月上旬にストア公開
- ✅ クラッシュ率 < 1%
- ✅ DAU/MAU比率 > 20%
- ✅ ユーザー評価 > 4.0

### フェーズ2の展開方針
- ユーザーフィードバックを反映
- データ分析に基づく機能追加
- 段階的なGameFi要素の導入

### 継続的改善
- 月次での機能改善リリース
- A/Bテストによる最適化
- ユーザーコミュニティとの対話

---

**更新履歴**

| 日付 | バージョン | 更新内容 |
|-----|----------|---------|
| 2025-10-09 | 1.0.0 | 初版作成（議事録からの整理） |
